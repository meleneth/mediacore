#!/usr/bin/env ruby

require 'optparse'
options = {}

optparse = OptionParser.new do |opts|
    opts.banner = "Usage: mediacore [options] command\ncommand can be init or status"

    opts.on('-h', '--help', "Display this screen") do
        puts opts
        exit
    end
end

optparse.parse!

if ARGV.count != 1 then
    puts "Unknown number of arguments.  try --help"
    exit
end

def get_mediacore_dir()
    directory = Dir.getwd
    while 1
        possible_directory = "#{directory}/.mediacore"
        return possible_directory if File.directory? possible_directory
        if directory == '/'
            puts "Unable to find MediaCore directory under #{Dir.getwd}"
            exit
        end
        directory = File.dirname(directory)
    end
end

def mediacore_init()
    Dir.mkdir('.mediacore')
end

def mediacore_status()
    mediacore_dir = get_mediacore_dir()
    puts "MediaCore directory is #{mediacore_dir}"
end

if ARGV[0] == "init" 
    mediacore_init()
end

if ARGV[0] == "status" 
    mediacore_status()
end

